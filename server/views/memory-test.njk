{% set page_title = "Home" %}
{% extends "_layout.njk" %}

{% block subheader %}
    <header class="bg-white shadow">
        <div class="grid max-w-7xl grid-cols-3 gap-4 mx-auto py-6 px-4 sm:px-6 lg:px-8">
            <div class="col-span-2">
                <p class="text-sm font-semibold tracking-wider leading-tight uppercase text-gray-400">Step 3 of 3
                </p>
                <h1 class="text-3xl font-semibold leading-tight text-gray-900">
                    Memory Test
                </h1>
                <p class="text-xl font-regular leading-tight text-gray-500">Try to re-assemble the grid from memory.</p>
            </div>
        </div>
    </header>
{% endblock subheader %}

{% block main %}
    <style>
        {% for image in images %}
            .image-{{loop.index0}}{
                background-image: url({{ image.path }});
            }
            .draggable-image {
                opacity: 0;
                position: absolute;
            }
             .draggable-image.image-{{loop.index0}}{
                opacity: 1;
                height: 100px;
                width: 100px;
            }
        {% endfor %}

        .image--target {
            height: 150px;
        }

        .image--source {
            height: 75px;
        }

        .image--is-dragging {
            opacity: 0.5;
        }
        .unselectable {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
    <script>
        window.state = {{ json | safe }}
    </script>
    <main>
        <div class="mx-auto my-6 grid grid-rows-4 grid-cols-4 grid-flow-row gap-3" style="max-width: calc(600px + 3rem);">
            {% for image in images %}
                <div class="bg-cover bg-center bg-gray-300 image image--target" id="target-{{ loop.index0 }}"></div>
            {% endfor %}
        </div>
        <div class="mx-auto my-6 grid grid-rows-2 grid-cols-8 grid-flow-row gap-3" style="max-width: calc(600px + 3rem);">
            {% for image in images %}
                <div class="bg-cover bg-center bg-gray-300 image image--source image-{{ loop.index0 }}" id="source-{{ loop.index0 }}"></div>
            {% endfor %}
        </div>
    </main>
    <div class="bg-cover bg-center draggable-image" id="draggable-image"></div>
{% endblock main %}